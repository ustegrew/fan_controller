EESchema Schematic File Version 2
LIBS:74xgxx
LIBS:74xx
LIBS:ac-dc
LIBS:actel
LIBS:adc-dac
LIBS:allegro
LIBS:Altera
LIBS:analog_devices
LIBS:analog_switches
LIBS:atmel
LIBS:audio
LIBS:battery_management
LIBS:bbd
LIBS:bosch
LIBS:brooktre
LIBS:cmos4000
LIBS:cmos_ieee
LIBS:conn
LIBS:contrib
LIBS:cypress
LIBS:dc-dc
LIBS:device
LIBS:digital-audio
LIBS:diode
LIBS:display
LIBS:driver_gate
LIBS:dsp
LIBS:elec-unifil
LIBS:ESD_Protection
LIBS:ftdi
LIBS:gennum
LIBS:graphic_symbols
LIBS:hc11
LIBS:infineon
LIBS:intel
LIBS:interface
LIBS:intersil
LIBS:ir
LIBS:Lattice
LIBS:leds
LIBS:LEM
LIBS:linear
LIBS:logic_programmable
LIBS:maxim
LIBS:mechanical
LIBS:memory
LIBS:microchip
LIBS:microchip_dspic33dsc
LIBS:microchip_pic10mcu
LIBS:microchip_pic12mcu
LIBS:microchip_pic16mcu
LIBS:microchip_pic18mcu
LIBS:microchip_pic24mcu
LIBS:microchip_pic32mcu
LIBS:microcontrollers
LIBS:modules
LIBS:motor_drivers
LIBS:motorola
LIBS:motors
LIBS:msp430
LIBS:nordicsemi
LIBS:nxp
LIBS:nxp_armmcu
LIBS:onsemi
LIBS:opto
LIBS:Oscillators
LIBS:philips
LIBS:power
LIBS:powerint
LIBS:Power_Management
LIBS:pspice
LIBS:references
LIBS:regul
LIBS:relays
LIBS:rfcom
LIBS:RFSolutions
LIBS:sensors
LIBS:silabs
LIBS:siliconi
LIBS:stm8
LIBS:stm32
LIBS:supertex
LIBS:switches
LIBS:texas
LIBS:transf
LIBS:transistors
LIBS:triac_thyristor
LIBS:ttl_ieee
LIBS:valves
LIBS:video
LIBS:wiznet
LIBS:Worldsemi
LIBS:Xicor
LIBS:xilinx
LIBS:zetex
LIBS:Zilog
LIBS:fan-controller_parts
LIBS:controller-cache
EELAYER 25 0
EELAYER END
$Descr A3 16535 11693
encoding utf-8
Sheet 14 15
Title ""
Date "2018-02-25"
Rev "1.0"
Comp ""
Comment1 ""
Comment2 ""
Comment3 ""
Comment4 "Router: 10Baud bus I/O"
$EndDescr
Text HLabel 14050 2650 2    60   Output ~ 0
OSC_25K_UNMUTE_10BAUD_SCL
Text HLabel 3000 2100 0    60   Input ~ 0
CPU_10BAUD_SCL
$Comp
L BC546 Q14001
U 1 1 5B438A1E
P 12200 2100
F 0 "Q14001" H 12400 2175 50  0000 L CNN
F 1 "BC546" H 12400 2100 50  0000 L CNN
F 2 "TO_SOT_Packages_THT:TO-92_Molded_Narrow" H 12400 2025 50  0001 L CIN
F 3 "" H 12200 2100 50  0001 L CNN
	1    12200 2100
	1    0    0    -1  
$EndComp
$Comp
L R R14003
U 1 1 5B438A26
P 12300 3150
F 0 "R14003" V 12200 3150 50  0000 C CNN
F 1 "100kΩ" V 12400 3150 50  0000 C CNN
F 2 "" V 12230 3150 50  0001 C CNN
F 3 "" H 12300 3150 50  0001 C CNN
	1    12300 3150
	1    0    0    -1  
$EndComp
$Comp
L R R14001
U 1 1 5B438A34
P 5350 2100
F 0 "R14001" V 5250 2100 50  0000 C CNN
F 1 "10kΩ" V 5450 2100 50  0000 C CNN
F 2 "" V 5280 2100 50  0001 C CNN
F 3 "" H 5350 2100 50  0001 C CNN
	1    5350 2100
	0    1    1    0   
$EndComp
$Comp
L R R14002
U 1 1 5B438A49
P 11500 3150
F 0 "R14002" V 11400 3150 50  0000 C CNN
F 1 "100kΩ" V 11600 3150 50  0000 C CNN
F 2 "" V 11430 3150 50  0001 C CNN
F 3 "" H 11500 3150 50  0001 C CNN
	1    11500 3150
	1    0    0    -1  
$EndComp
Text HLabel 3000 1000 0    60   UnSpc ~ 0
V_LOGIC
Text HLabel 3000 8600 0    60   UnSpc ~ 0
GND
Text HLabel 3000 7350 0    60   Input ~ 0
CPU_10BAUD_WR_EN
Text HLabel 3000 5400 0    60   Input ~ 0
DETECTOR_15K_10BAUD_SDA
Text HLabel 14050 5400 2    60   Output ~ 0
OSC_15K_UNMUTE_10BAUD_SDA
$Comp
L BC546 Q14004
U 1 1 5B439F82
P 10400 7350
F 0 "Q14004" H 10600 7425 50  0000 L CNN
F 1 "BC546" H 10600 7350 50  0000 L CNN
F 2 "TO_SOT_Packages_THT:TO-92_Molded_Narrow" H 10600 7275 50  0001 L CIN
F 3 "" H 10400 7350 50  0001 L CNN
	1    10400 7350
	1    0    0    -1  
$EndComp
Text HLabel 3000 4450 0    60   BiDi ~ 0
CPU_10BAUD_SDA
$Comp
L BC546 Q14005
U 1 1 5B439F8D
P 9650 7850
F 0 "Q14005" H 9850 7925 50  0000 L CNN
F 1 "BC546" H 9850 7850 50  0000 L CNN
F 2 "TO_SOT_Packages_THT:TO-92_Molded_Narrow" H 9850 7775 50  0001 L CIN
F 3 "" H 9650 7850 50  0001 L CNN
	1    9650 7850
	1    0    0    -1  
$EndComp
$Comp
L R R14006
U 1 1 5B439FA2
P 9050 5400
F 0 "R14006" V 8950 5400 50  0000 C CNN
F 1 "10kΩ" V 9150 5400 50  0000 C CNN
F 2 "" V 8980 5400 50  0001 C CNN
F 3 "" H 9050 5400 50  0001 C CNN
	1    9050 5400
	0    1    1    0   
$EndComp
$Comp
L BC546 Q14002
U 1 1 5B439FB3
P 8200 4450
F 0 "Q14002" H 8400 4525 50  0000 L CNN
F 1 "BC546" H 8400 4450 50  0000 L CNN
F 2 "TO_SOT_Packages_THT:TO-92_Molded_Narrow" H 8400 4375 50  0001 L CIN
F 3 "" H 8200 4450 50  0001 L CNN
	1    8200 4450
	1    0    0    -1  
$EndComp
$Comp
L R R14010
U 1 1 5B439FBC
P 8300 8250
F 0 "R14010" V 8200 8250 50  0000 C CNN
F 1 "100kΩ" V 8400 8250 50  0000 C CNN
F 2 "" V 8230 8250 50  0001 C CNN
F 3 "" H 8300 8250 50  0001 C CNN
	1    8300 8250
	1    0    0    -1  
$EndComp
$Comp
L R R14004
U 1 1 5B439FCA
P 5350 4450
F 0 "R14004" V 5250 4450 50  0000 C CNN
F 1 "10kΩ" V 5450 4450 50  0000 C CNN
F 2 "" V 5280 4450 50  0001 C CNN
F 3 "" H 5350 4450 50  0001 C CNN
	1    5350 4450
	0    1    1    0   
$EndComp
$Comp
L R R14008
U 1 1 5B439FE1
P 5350 7350
F 0 "R14008" V 5250 7350 50  0000 C CNN
F 1 "10kΩ" V 5450 7350 50  0000 C CNN
F 2 "" V 5280 7350 50  0001 C CNN
F 3 "" H 5350 7350 50  0001 C CNN
	1    5350 7350
	0    1    1    0   
$EndComp
$Comp
L R R14009
U 1 1 5B439FEC
P 6050 8250
F 0 "R14009" V 5950 8250 50  0000 C CNN
F 1 "100kΩ" V 6150 8250 50  0000 C CNN
F 2 "" V 5980 8250 50  0001 C CNN
F 3 "" H 6050 8250 50  0001 C CNN
	1    6050 8250
	1    0    0    -1  
$EndComp
$Comp
L BC546 Q14003
U 1 1 5B439FD6
P 6700 7350
F 0 "Q14003" H 6900 7425 50  0000 L CNN
F 1 "BC546" H 6900 7350 50  0000 L CNN
F 2 "TO_SOT_Packages_THT:TO-92_Molded_Narrow" H 6900 7275 50  0001 L CIN
F 3 "" H 6700 7350 50  0001 L CNN
	1    6700 7350
	1    0    0    -1  
$EndComp
Text Notes 2900 7800 2    60   ~ 0
10Baud bus WRITE_ENABLE\nLO: CPU Receives serial data\nHI: CPU Sends serial data
$Comp
L 1N4148 D14001
U 1 1 5B55AEF3
P 6800 4900
F 0 "D14001" H 6800 5000 50  0000 C CNN
F 1 "1N4148" H 6800 4800 50  0000 C CNN
F 2 "Diodes_THT:D_DO-35_SOD27_Horizontal_RM10" H 6800 4725 50  0001 C CNN
F 3 "" H 6800 4900 50  0001 C CNN
	1    6800 4900
	0    -1   1    0   
$EndComp
$Comp
L R R14007
U 1 1 5B5625B9
P 9750 6800
F 0 "R14007" V 9650 6800 50  0000 C CNN
F 1 "100kΩ" V 9850 6800 50  0000 C CNN
F 2 "" V 9680 6800 50  0001 C CNN
F 3 "" H 9750 6800 50  0001 C CNN
	1    9750 6800
	1    0    0    -1  
$EndComp
Wire Wire Line
	12300 2300 12300 3000
Connection ~ 12300 2650
Wire Wire Line
	3000 1000 12300 1000
Wire Wire Line
	3000 8600 12300 8600
Wire Wire Line
	8300 1000 8300 4250
Wire Wire Line
	8300 4650 8300 8100
Wire Wire Line
	8300 8600 8300 8400
Wire Wire Line
	12300 2650 14050 2650
Wire Wire Line
	12300 1000 12300 1900
Connection ~ 8300 1000
Wire Wire Line
	11500 8600 11500 3300
Connection ~ 8300 8600
Wire Wire Line
	12300 8600 12300 3300
Connection ~ 11500 8600
Wire Wire Line
	3000 4450 5200 4450
Wire Wire Line
	6800 4450 6800 4750
Wire Wire Line
	5500 4450 8000 4450
Connection ~ 6800 4450
Wire Wire Line
	3000 5400 6800 5400
Wire Wire Line
	5500 7350 6500 7350
Wire Wire Line
	6050 7350 6050 8100
Connection ~ 6050 7350
Wire Wire Line
	6050 8400 6050 8600
Connection ~ 6050 8600
Wire Wire Line
	6800 7550 6800 8600
Connection ~ 6800 8600
Wire Wire Line
	6800 5050 6800 7150
Connection ~ 6800 5400
Wire Wire Line
	3000 2100 5200 2100
Wire Wire Line
	5500 2100 12000 2100
Wire Wire Line
	11500 3000 11500 2100
Connection ~ 11500 2100
Wire Wire Line
	8900 5400 8300 5400
Connection ~ 8300 5400
Wire Wire Line
	9200 5400 14050 5400
Wire Wire Line
	10500 7150 10500 5400
Connection ~ 10500 5400
Wire Wire Line
	10500 7550 10500 8600
Connection ~ 10500 8600
Wire Wire Line
	9750 6950 9750 7650
Wire Wire Line
	9750 8050 9750 8600
Connection ~ 9750 8600
Wire Wire Line
	9750 6650 9750 1000
Connection ~ 9750 1000
Wire Wire Line
	10200 7350 9750 7350
Connection ~ 9750 7350
Wire Wire Line
	9450 7850 6050 7850
Connection ~ 6050 7850
Wire Notes Line
	1200 6200 15600 6200
Text Notes 1050 8050 1    79   Italic 0
Write enable logic
Text Notes 1050 5400 1    79   Italic 0
For serial data
Text Notes 1050 2650 1    79   Italic 0
For serial clock
Wire Notes Line
	1200 3750 15600 3750
Text Notes 6750 4350 0    60   ~ 12
A
Text Notes 6850 5450 0    60   ~ 12
B
Text Notes 3850 10400 0    60   Italic 0
WR_EN (Write-enable) logic\n    * WR_EN low (about 0V)\n        * TrsA open, TrsB open, TrsC closed.\n        * OSC_15K_UNMUTE_10BAUD_SDA pulled to GND (0V),\n          i.e. 15kHz oscillator will be muted.\n        * CPU_10BAUD_SDA follows A follows B follows DETECTOR_15K_10BAUD_SDA.\n    * WR_EN high (about 5V)\n        * TrsA closed, TrsB closed, TrsC open.\n        * DA will be either closed when A is on GND potential\n          or reverse polarized when A is on V_LOGIC potential,\n          i.e. B and A will be isolated from each other.\n        * DETECTOR_15K_10BAUD_SDA pulled to GND (0V)\n          i.e. 15kHz detector remains silent.\n        * OSC_15K_UNMUTE_10BAUD_SDA follows A follows CPU_10BAUD_SDA.\n    * Legend\n        * Trs... open:   Transistor, CE, not conducting\n        * Trs... closed: Transistor, CE, conducting
Text Notes 6450 7200 0    60   ~ 12
TrsA
Text Notes 9350 7750 0    60   ~ 12
TrsB
Text Notes 10150 7200 0    60   ~ 12
TrsC
Text Notes 6450 4950 0    60   ~ 12
DA
Text Notes 700  11050 0    60   ~ 0
Notes: \n  * The communication with the periphery implements \n    ideas from the I2C bus design with the addon that we \n    encode the logic levels with AC signals between\n    controller and peripherals. For the clock we use a \n    25kHz signal, for the data we use a 15kHz signal.\n    Signal abscent = logic 0, Signal present = logic 1 \n  * The design is geared at EMC robustness, i.e. we \n    employ surge protection between controller\n    and periphery. Equipment operates in an area \n    with thunderstorms and near lightning strikes.\n  * As a trade-off, comms between controller and \n    periphery can only handle very low data rates.\n    It's no problem in this application as we\n    are handling very small amounts of data (a few bytes \n    per transferral) when receiving and sending data from / to\n    the peripherals.\n  * Serial clock is unidirectional as the clock is generated\n    by the controller with all peripheral devices listening.\n  * Serial data is bidirectional as the CPU both receives\n    and transmits data from / to the periphery devices.\n  * DETECTOR_15K_10BAUD_SDA is connected to an \n    open-collector output. It seemed best to put the \n    pullup resistor here.
$Comp
L R R14005
U 1 1 5B5761E8
P 4600 4950
F 0 "R14005" V 4500 4950 50  0000 C CNN
F 1 "10kΩ" V 4700 4950 50  0000 C CNN
F 2 "" V 4530 4950 50  0001 C CNN
F 3 "" H 4600 4950 50  0001 C CNN
	1    4600 4950
	1    0    0    -1  
$EndComp
Wire Wire Line
	4600 4800 4600 1000
Connection ~ 4600 1000
Wire Wire Line
	5200 7350 3000 7350
Wire Wire Line
	4600 5100 4600 5400
Connection ~ 4600 5400
$EndSCHEMATC
